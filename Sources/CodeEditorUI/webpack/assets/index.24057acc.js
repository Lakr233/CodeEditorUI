import{C,L as y,a as m,S as x,s as F,x as M,j as U,h as B,c as N,b as H,d as K,e as W,r as Z,p as q,m as V,l as R,f as G,H as J,u as Y,w as _,o as Q,g as X,E as p,i as h,k as A,n as L,q as ee,t as ne,v as te,y as re,z as ie,A as ae,B as oe,D as ue,F as le,G as ce,I as se,J as fe,K as de,M as T,N as $,O as pe,P as he,Q as ge}from"./vendor.b30b39b4.js";const ve=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};ve();const s={theme:new C,language:new C},ke=[s.theme.of([]),s.language.of([])];function we(e){return Promise.resolve().then(function(){return new m(x.define(e))})}const ye=y.of({name:"Shell",load(){return we(be)}});var k={};function b(e,n){for(var t=0;t<n.length;t++)k[n[t]]=e}var E=["true","false"],P=["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function","alias"],O=["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"];b("atom",E);b("keyword",P);b("builtin",O);function me(e,n){if(e.eatSpace())return null;var t=e.sol(),i=e.next();if(i==="\\")return e.next(),null;if(i==="'"||i==='"'||i==="`")return n.tokens.unshift(g(i,i==="`"?"quote":"string")),d(e,n);if(i==="#")return t&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if(i==="$")return n.tokens.unshift(D),d(e,n);if(i==="+"||i==="=")return"operator";if(i==="-")return e.eat("-"),e.eatWhile(/\w/),"attribute";if(i=="<"){if(e.match("<<"))return"operator";var r=e.match(/^<-?\s*['"]?([^'"]*)['"]?/);if(r)return n.tokens.unshift(_e(r[1])),"string.special"}if(/\d/.test(i)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var a=e.current();return e.peek()==="="&&/\w+/.test(a)?"def":k.hasOwnProperty(a)?k[a]:null}function g(e,n){var t=e=="("?")":e=="{"?"}":e;return function(i,r){for(var a,o=!1;(a=i.next())!=null;){if(a===t&&!o){r.tokens.shift();break}else if(a==="$"&&!o&&e!=="'"&&i.peek()!=t){o=!0,i.backUp(1),r.tokens.unshift(D);break}else{if(!o&&e!==t&&a===e)return r.tokens.unshift(g(e,n)),d(i,r);if(!o&&/['"]/.test(a)&&!/['"]/.test(e)){r.tokens.unshift(xe(a,"string")),i.backUp(1);break}}o=!o&&a==="\\"}return n}}function xe(e,n){return function(t,i){return i.tokens[0]=g(e,n),t.next(),d(t,i)}}var D=function(e,n){n.tokens.length>1&&e.eat("$");var t=e.next();return/['"({]/.test(t)?(n.tokens[0]=g(t,t=="("?"quote":t=="{"?"def":"string"),d(e,n)):(/\d/.test(t)||e.eatWhile(/\w/),n.tokens.shift(),"def")};function _e(e){return function(n,t){return n.sol()&&n.string==e&&t.tokens.shift(),n.skipToEnd(),"string.special"}}function d(e,n){return(n.tokens[0]||me)(e,n)}const be={startState:function(){return{tokens:[]}},token:function(e,n){return d(e,n)},languageData:{autocomplete:E.map(e=>({label:e,type:"enum"})).concat(P.map(e=>({type:"keyword",label:e})),O.map(e=>({label:e,type:"method"}))),closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}};function Se(e){return Promise.resolve().then(function(){return new m(x.define(e))})}const Ce=y.of({name:"Swift",load(){return Se(Ze)}});function v(e){for(var n={},t=0;t<e.length;t++)n[e[t]]=!0;return n}var Le=v(["_","var","let","class","enum","extension","import","protocol","struct","func","typealias","associatedtype","open","public","internal","fileprivate","private","deinit","init","new","override","self","subscript","super","convenience","dynamic","final","indirect","lazy","required","static","unowned","unowned(safe)","unowned(unsafe)","weak","as","is","break","case","continue","default","else","fallthrough","for","guard","if","in","repeat","switch","where","while","defer","return","inout","mutating","nonmutating","catch","do","rethrows","throw","throws","try","didSet","get","set","willSet","assignment","associativity","infix","left","none","operator","postfix","precedence","precedencegroup","prefix","right","Any","AnyObject","Type","dynamicType","Self","Protocol","__COLUMN__","__FILE__","__FUNCTION__","__LINE__"]),ze=v(["var","let","class","enum","extension","import","protocol","struct","func","typealias","associatedtype","for"]),Ae=v(["true","false","nil","self","super","_"]),Te=v(["Array","Bool","Character","Dictionary","Double","Float","Int","Int8","Int16","Int32","Int64","Never","Optional","Set","String","UInt8","UInt16","UInt32","UInt64","Void"]),$e="+-/*%=|&<>~^?!",Ee=":;,.(){}[]",Pe=/^\-?0b[01][01_]*/,Oe=/^\-?0o[0-7][0-7_]*/,De=/^\-?0x[\dA-Fa-f][\dA-Fa-f_]*(?:(?:\.[\dA-Fa-f][\dA-Fa-f_]*)?[Pp]\-?\d[\d_]*)?/,Ie=/^\-?\d[\d_]*(?:\.\d[\d_]*)?(?:[Ee]\-?\d[\d_]*)?/,je=/^\$\d+|(`?)[_A-Za-z][_A-Za-z$0-9]*\1/,Fe=/^\.(?:\$\d+|(`?)[_A-Za-z][_A-Za-z$0-9]*\1)/,Me=/^\#[A-Za-z]+/,Ue=/^@(?:\$\d+|(`?)[_A-Za-z][_A-Za-z$0-9]*\1)/;function I(e,n,t){if(e.sol()&&(n.indented=e.indentation()),e.eatSpace())return null;var i=e.peek();if(i=="/"){if(e.match("//"))return e.skipToEnd(),"comment";if(e.match("/*"))return n.tokenize.push(w),w(e,n)}if(e.match(Me))return"builtin";if(e.match(Ue))return"attribute";if(e.match(Pe)||e.match(Oe)||e.match(De)||e.match(Ie))return"number";if(e.match(Fe))return"property";if($e.indexOf(i)>-1)return e.next(),"operator";if(Ee.indexOf(i)>-1)return e.next(),e.match(".."),"punctuation";var r;if(r=e.match(/("""|"|')/)){var a=Ne.bind(null,r[0]);return n.tokenize.push(a),a(e,n)}if(e.match(je)){var o=e.current();return Te.hasOwnProperty(o)?"type":Ae.hasOwnProperty(o)?"atom":Le.hasOwnProperty(o)?(ze.hasOwnProperty(o)&&(n.prev="define"),"keyword"):t=="define"?"def":"variable"}return e.next(),null}function Be(){var e=0;return function(n,t,i){var r=I(n,t,i);if(r=="punctuation"){if(n.current()=="(")++e;else if(n.current()==")"){if(e==0)return n.backUp(1),t.tokenize.pop(),t.tokenize[t.tokenize.length-1](n,t);--e}}return r}}function Ne(e,n,t){for(var i=e.length==1,r,a=!1;r=n.peek();)if(a){if(n.next(),r=="(")return t.tokenize.push(Be()),"string";a=!1}else{if(n.match(e))return t.tokenize.pop(),"string";n.next(),a=r=="\\"}return i&&t.tokenize.pop(),"string"}function w(e,n){for(var t;e.match(/^[^/*]+/,!0),t=e.next(),!!t;)t==="/"&&e.eat("*")?n.tokenize.push(w):t==="*"&&e.eat("/")&&n.tokenize.pop();return"comment"}function He(e,n,t){this.prev=e,this.align=n,this.indented=t}function Ke(e,n){var t=n.match(/^\s*($|\/[\/\*]|[)}\]])/,!1)?null:n.column()+1;e.context=new He(e.context,t,e.indented)}function We(e){e.context&&(e.indented=e.context.indented,e.context=e.context.prev)}const Ze={startState:function(){return{prev:null,context:null,indented:0,tokenize:[]}},token:function(e,n){var t=n.prev;n.prev=null;var i=n.tokenize[n.tokenize.length-1]||I,r=i(e,n,t);if(!r||r=="comment"?n.prev=t:n.prev||(n.prev=r),r=="punctuation"){var a=/[\(\[\{]|([\]\)\}])/.exec(e.current());a&&(a[1]?We:Ke)(n,e)}return r},indent:function(e,n,t){var i=e.context;if(!i)return 0;var r=/^[\]\}\)]/.test(n);return i.align!=null?i.align-(r?1:0):i.indented+(r?0:t.unit)},languageData:{indentOnInput:/^\s*[\)\}\]]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}};function qe(e){return Promise.resolve().then(function(){return new m(x.define(e))})}const Ve=y.of({name:"Yaml",load(){return qe(Je)}});var Re=["true","false","on","off","yes","no"],Ge=new RegExp("\\b(("+Re.join(")|(")+"))$","i");const Je={token:function(e,n){var t=e.peek(),i=n.escaped;if(n.escaped=!1,t=="#"&&(e.pos==0||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(n.literal&&e.indentation()>n.keyCol)return e.skipToEnd(),"string";if(n.literal&&(n.literal=!1),e.sol()){if(n.keyCol=0,n.pair=!1,n.pairStart=!1,e.match("---")||e.match("..."))return"def";if(e.match(/^\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return t=="{"?n.inlinePairs++:t=="}"?n.inlinePairs--:t=="["?n.inlineList++:n.inlineList--,"meta";if(n.inlineList>0&&!i&&t==",")return e.next(),"meta";if(n.inlinePairs>0&&!i&&t==",")return n.keyCol=0,n.pair=!1,n.pairStart=!1,e.next(),"meta";if(n.pairStart){if(e.match(/^\s*(\||\>)\s*/))return n.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(n.inlinePairs==0&&e.match(/^\s*-?[0-9\.\,]+\s?$/)||n.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(Ge))return"keyword"}return!n.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(n.pair=!0,n.keyCol=e.indentation(),"atom"):n.pair&&e.match(/^:\s*/)?(n.pairStart=!0,"meta"):(n.pairStart=!1,n.escaped=t=="\\",e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}},z=async e=>{switch(e){case"shell":case"sh":return await ye.load().then(r=>r.extension);case"swift":return await Ce.load().then(r=>r.extension);case"yaml":return await Ve.load().then(r=>r.extension);case"markdown":case"md":return V({addKeymap:!0,codeLanguages:R,base:G});case"python":return q();case"rust":return Z();case"java":return W();case"javascript":case"typescript":return K({jsx:!0,typescript:!0});case"cpp":return H();case"css":return N();case"html":return B({autoCloseTags:!0,matchClosingTags:!0});case"json":return U();case"xml":return M();case"sql":return F()}return null},j=()=>["shell","sh","md","markdown","python","rust","java","javascript","typescript","cpp","css","html","json","xml","sql","swift","yaml"],Ye=e=>j().includes(e),Qe=J.define([]),Xe=e=>{const n=Y({});_([n,e],([t])=>{!e.value||(t?e.value.dispatch({effects:[s.theme.reconfigure(Q)]}):e.value.dispatch({effects:[s.theme.reconfigure(X)]}))},{immediate:!0,flush:"post"})};p.theme({"&":{height:"100%"}});const en=e=>{const n=h(),t=h(),{onChange:i}=e;return A(async()=>{if(!n.value)return;const r=L.create({doc:e.initialDoc,extensions:[ee.of([...ne,...te,{key:"Mod-s",run(l){return!1},preventDefault:!0},{key:"Tab",run(l){return re(l)}},{key:"Shift-Space",run:ie}]),ae(),oe(),ue(),le(),ce.fallback,se(),fe(),L.tabSize.of(2),de(),Qe,...ke,p.lineWrapping,p.updateListener.of(l=>{l.changes&&i&&i(l.state)}),p.updateListener.of(l=>{var u;if(l.heightChanged){const c=l.view.viewState.heightMap.height;(u=window.webkit)==null||u.messageHandlers.callbackHandler.postMessage({type:"height",msg:`${c}`})}})]}),a=new p({state:r,parent:n.value});t.value=a;const o=await z(e.language.value);o&&s.language.reconfigure(o),a.dispatch({effects:[s.language.reconfigure(o)]}),nn(a,{language:e.language})}),_(()=>e.language.value,async r=>{const a=await z(r);a&&s.language.reconfigure(a),t.value&&t.value.dispatch({effects:[s.language.reconfigure(a)]})}),Xe(t),[n,t]};function nn(e,n){window.editor=e,window.editor.setFontSize=t=>{document.documentElement.style.fontSize=`${t}px`},window.editor.setLanguage=t=>{!Ye(t)||(n.language.value=t)},window.editor.getAvailableLanguages=j}const tn=T({props:{deafultText:{type:String,required:!1},text:{type:String,required:!1},onChange:{type:Function,required:!1},onStateChange:{type:Function,required:!1}},emits:["update:value","update:state"],setup(e,{emit:n}){var o,l;const t=e,i=h("shell"),[r,a]=en({initialDoc:(l=(o=t.text)!=null?o:t.deafultText)!=null?l:"",language:i,onChange:u=>{var f,S;const c=u.doc.toString();n("update:state",u),n("update:value",c),(f=t.onChange)==null||f.call(t,u.doc.toString()),(S=t.onStateChange)==null||S.call(t,u)}});return _(()=>t.text,function u(c){const f=a.value;if(!f)return requestAnimationFrame(()=>u(c));c!==f.state.doc.toString()&&f.dispatch({changes:{from:0,to:f.state.doc.length,insert:c}})}),A(()=>{var u,c;"webkit"in window||(u=r.value)==null||u.classList.add("in-browser"),(c=a.value)==null||c.focus()}),(u,c)=>($(),pe("div",{ref_key:"refContainer",ref:r,class:"editor"},null,512))}});const rn=T({setup(e){const n=h(""),t=r=>{n.value=r};window.setText=t;const i=r=>{var o;const a={magic:"content",msg:r};(o=window.webkit)==null||o.messageHandlers.callbackHandler.postMessage(a),n.value=r};return(r,a)=>($(),he(tn,{text:n.value,"onUpdate:value":i},null,8,["text"]))}}),an=ge(rn);an.mount("#app");
